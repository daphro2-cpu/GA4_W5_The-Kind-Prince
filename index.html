<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GA4 – The Kind Prince | Online Practice</title>
<style>
  :root{
    --bg:#f4f5fb;
    --card:#ffffff;
    --ink:#1f2430;
    --accent:#5a3d8a;
    --good:#1a7f37;
    --bad:#b42318;
    --soft:#e7defa;
    --soft2:#eef0ff;
  }
  body{
    margin:0;
    font-family: Arial, Helvetica, sans-serif;
    background:var(--bg);
    color:var(--ink);
  }
  header{
    background:linear-gradient(90deg, #6b4fb3, #4b2f88);
    color:white;
    padding:18px 16px;
  }
  header h1{
    margin:0;
    font-size:18px;
    font-weight:700;
  }
  header p{
    margin:6px 0 0;
    opacity:.9;
    font-size:13px;
  }
  .wrap{
    max-width:960px;
    margin:0 auto;
    padding:16px;
  }
  .card{
    background:var(--card);
    border-radius:14px;
    padding:16px;
    box-shadow:0 6px 18px rgba(20,20,40,.08);
    margin-bottom:16px;
  }
  h2{
    margin:0 0 10px;
    color:var(--accent);
    font-size:16px;
  }
  .small{
    font-size:13px;
    opacity:.85;
    margin-top:6px;
  }
  .q{
    padding:12px;
    border-radius:12px;
    background:var(--soft2);
    margin:10px 0;
  }
  .q p{
    margin:0 0 10px;
    font-size:14px;
  }
  .btnrow{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
  }
  button.choice{
    border:0;
    background:var(--soft);
    padding:10px 12px;
    border-radius:10px;
    cursor:pointer;
    font-size:14px;
  }
  button.choice:disabled{
    cursor:not-allowed;
    opacity:.8;
  }
  .feedback{
    margin-top:10px;
    font-weight:700;
    font-size:14px;
  }
  .good{color:var(--good);}
  .bad{color:var(--bad);}

  /* Cloze-spell */
  .progress{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
    margin:8px 0 12px;
    font-size:13px;
    opacity:.9;
  }
  .sentence{
    font-size:15px;
    line-height:1.4;
    margin:0 0 10px;
  }
  .blank{
    display:inline-block;
    min-width:140px;
    padding:6px 10px;
    border-radius:10px;
    background:#fff;
    border:2px dashed #c8b8f1;
    font-weight:700;
    letter-spacing:.5px;
  }
  .tiles{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    margin:10px 0;
  }
  button.tile{
    border:0;
    background:#e9ecff;
    padding:10px 12px;
    border-radius:10px;
    cursor:pointer;
    font-size:14px;
    min-width:38px;
    text-transform:lowercase;
  }
  .controls{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    margin-top:10px;
  }
  button.action{
    border:0;
    background:#2f2a3a;
    color:white;
    padding:10px 12px;
    border-radius:10px;
    cursor:pointer;
    font-size:14px;
  }
  button.action.secondary{
    background:#6b6f7a;
  }
  button.action.ghost{
    background:transparent;
    color:#2f2a3a;
    border:2px solid #d7d9e6;
  }
  .hint{
    font-size:13px;
    opacity:.85;
    margin-top:6px;
  }
</style>
</head>

<body>
<header>
  <h1>GA4 Online Practice – The Kind Prince</h1>
  <p>Part 1: Meaning Check (11) · Part 2: Cloze + Spell (7)</p>
</header>

<div class="wrap">

  <!-- PART 1 -->
  <div class="card">
    <h2>Part 1 — Choose the correct meaning (11)</h2>
    <div id="p1"></div>
    <div class="small">Tip: Click an answer. It will turn green (correct) or red (wrong).</div>
  </div>

  <!-- PART 2+3 COMBINED -->
  <div class="card">
    <h2>Part 2 — Fill in the blank AND spell the word (7)</h2>

    <div class="progress">
      <div><strong id="qCount">Question 1 / 7</strong></div>
      <div><span id="score">Score: 0</span></div>
    </div>

    <p class="sentence" id="sentence"></p>
    <div class="blank" id="blank">(spell here)</div>

    <div class="tiles" id="tiles"></div>

    <div class="controls">
      <button class="action" id="checkBtn">Check</button>
      <button class="action secondary" id="resetBtn">Reset</button>
      <button class="action ghost" id="showBtn">Show Answer</button>
      <button class="action" id="nextBtn" disabled>Next</button>
    </div>

    <div class="feedback" id="p2fb"></div>
    <div class="hint" id="hint"></div>
  </div>

</div>

<script>
/* -----------------------------
   PART 1 (11 meaning questions)
   7 single words + 4 phrases
------------------------------*/
const part1 = [
  {prompt:"To divide things into different groups:", correct:"separate", choices:["separate","boast"]},
  {prompt:"To talk with pride about yourself:", correct:"boast", choices:["boast","challenge"]},
  {prompt:"To say you will cause harm:", correct:"threaten", choices:["threaten","shoot"]},
  {prompt:"Something honest and real:", correct:"truth", choices:["truth","lie"]},
  {prompt:"Something that is not true:", correct:"lie", choices:["truth","lie"]},
  {prompt:"To shoot at something (with a weapon):", correct:"shoot", choices:["shoot","separate"]},
  {prompt:"To invite someone to compete or prove something:", correct:"challenge", choices:["challenge","threaten"]},

  // phrases (4)
  {prompt:"To point carefully before shooting:", correct:"take aim", choices:["take aim","make a plan"]},
  {prompt:"To decide what you will do:", correct:"make a plan", choices:["make a plan","get rid of"]},
  {prompt:"To remove something/someone:", correct:"get rid of", choices:["get rid of","put in charge of"]},
  {prompt:"To give someone responsibility:", correct:"put in charge of", choices:["put in charge of","take aim"]},
];

function renderPart1(){
  const host = document.getElementById("p1");
  host.innerHTML = "";
  part1.forEach((q, idx) => {
    const box = document.createElement("div");
    box.className = "q";
    const p = document.createElement("p");
    p.innerHTML = `<strong>${idx+1}.</strong> ${q.prompt}`;
    box.appendChild(p);

    const row = document.createElement("div");
    row.className = "btnrow";

    q.choices.forEach(ch => {
      const b = document.createElement("button");
      b.className = "choice";
      b.textContent = ch;
      b.onclick = () => {
        // lock both choices after click
        [...row.querySelectorAll("button")].forEach(x => x.disabled = true);
        if(ch === q.correct){
          b.style.background = "#b6f2c6";
        }else{
          b.style.background = "#f5b7b1";
          // also show correct one green
          [...row.querySelectorAll("button")].forEach(x=>{
            if(x.textContent === q.correct) x.style.background = "#b6f2c6";
          });
        }
      };
      row.appendChild(b);
    });

    box.appendChild(row);
    host.appendChild(box);
  });
}
renderPart1();

/* ------------------------------------
   PART 2+3 Combined: Cloze + Spell (7)
   Using the 7 single-word targets
-------------------------------------*/
const cloze = [
  {word:"threaten", sentence:"The servants tried to ________ the king with false stories.", hint:"Meaning: say you will cause harm."},
  {word:"boast", sentence:"The boy did not ________ about himself or his past.", hint:"Meaning: talk too proudly."},
  {word:"separate", sentence:"The king asked the boy to ________ the wheat and barley.", hint:"Meaning: divide into groups."},
  {word:"lie", sentence:"It is wrong to tell a ________ to hurt someone else.", hint:"Meaning: something not true."},
  {word:"truth", sentence:"A good friend tells the ________, even when it is hard.", hint:"Meaning: something honest and real."},
  {word:"challenge", sentence:"The jealous servants tried to ________ the boy with impossible tasks.", hint:"Meaning: test someone / invite to prove something."},
  {word:"shoot", sentence:"The prince did not want to ________ the bird because it had babies.", hint:"Meaning: use a weapon to hit something."},
];

let qi = 0;
let built = "";
let score = 0;
let checked = false;

const sentenceEl = document.getElementById("sentence");
const blankEl = document.getElementById("blank");
const tilesEl = document.getElementById("tiles");
const fbEl = document.getElementById("p2fb");
const hintEl = document.getElementById("hint");
const qCountEl = document.getElementById("qCount");
const scoreEl = document.getElementById("score");
const checkBtn = document.getElementById("checkBtn");
const resetBtn = document.getElementById("resetBtn");
const showBtn = document.getElementById("showBtn");
const nextBtn = document.getElementById("nextBtn");

function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

function loadQ(){
  checked = false;
  built = "";
  fbEl.textContent = "";
  fbEl.className = "feedback";
  nextBtn.disabled = true;
  blankEl.textContent = "(spell here)";

  const item = cloze[qi];
  qCountEl.textContent = `Question ${qi+1} / ${cloze.length}`;
  scoreEl.textContent = `Score: ${score}`;
  hintEl.textContent = item.hint;

  sentenceEl.innerHTML = item.sentence.replace("________", `<span class="blank">(spell here)</span>`);
  // We keep a separate blank display below for clarity
  // build tiles
  const letters = shuffle(item.word.split(""));
  tilesEl.innerHTML = "";
  letters.forEach((L, idx) => {
    const b = document.createElement("button");
    b.className = "tile";
    b.textContent = L;
    b.onclick = () => {
      if(checked) return;
      built += L;
      blankEl.textContent = built;
      b.disabled = true;
      b.style.opacity = 0.5;
    };
    tilesEl.appendChild(b);
  });
}

function resetQ(){
  if(checked) return; // keep reset only before check (clean workflow)
  built = "";
  blankEl.textContent = "(spell here)";
  // re-enable tiles
  [...tilesEl.querySelectorAll("button")].forEach(b=>{
    b.disabled = false;
    b.style.opacity = 1;
  });
}

function checkQ(){
  if(checked) return;
  checked = true;

  const ans = cloze[qi].word;
  if(built === ans){
    fbEl.innerHTML = `<span class="good">Correct ✅</span>`;
    score += 1;
    scoreEl.textContent = `Score: ${score}`;
    nextBtn.disabled = false;
  }else{
    fbEl.innerHTML = `<span class="bad">Not yet ❌</span> <span class="small">Click “Show Answer”, then try again next time.</span>`;
    nextBtn.disabled = false; // let them move on even if wrong (GA-friendly)
  }
}

function showAnswer(){
  const ans = cloze[qi].word;
  blankEl.textContent = ans;
  fbEl.innerHTML = `<span class="bad">Answer:</span> <strong>${ans}</strong>`;
  // lock tiles
  [...tilesEl.querySelectorAll("button")].forEach(b=>{
    b.disabled = true;
    b.style.opacity = 0.5;
  });
  checked = true;
  nextBtn.disabled = false;
}

function nextQ(){
  qi++;
  if(qi >= cloze.length){
    // finish screen
    sentenceEl.innerHTML = `✅ Finished!`;
    blankEl.textContent = `Final Score: ${score} / ${cloze.length}`;
    tilesEl.innerHTML = "";
    hintEl.textContent = "You can refresh the page to try again.";
    fbEl.textContent = "";
    checkBtn.disabled = true;
    resetBtn.disabled = true;
    showBtn.disabled = true;
    nextBtn.disabled = true;
    qCountEl.textContent = `Done`;
    return;
  }
  loadQ();
}

checkBtn.onclick = checkQ;
resetBtn.onclick = resetQ;
showBtn.onclick = showAnswer;
nextBtn.onclick = nextQ;

loadQ();
</script>

</body>
</html>
